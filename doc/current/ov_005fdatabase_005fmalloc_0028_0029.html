<html lang="en">
<head>
<title>ov_database_malloc() - LibOV API Reference</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="LibOV API Reference">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Database.html#Database" title="Database">
<link rel="prev" href="ov_005fdatabase_005fshutdown_0028_0029.html#ov_005fdatabase_005fshutdown_0028_0029" title="ov_database_shutdown()">
<link rel="next" href="ov_005fdatabase_005frealloc_0028_0029.html#ov_005fdatabase_005frealloc_0028_0029" title="ov_database_realloc()">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="ov_database_malloc()"></a>
<a name="ov_005fdatabase_005fmalloc_0028_0029"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="ov_005fdatabase_005frealloc_0028_0029.html#ov_005fdatabase_005frealloc_0028_0029">ov_database_realloc()</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="ov_005fdatabase_005fshutdown_0028_0029.html#ov_005fdatabase_005fshutdown_0028_0029">ov_database_shutdown()</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Database.html#Database">Database</a>
<hr>
</div>

<h3 class="section">10.7 Allocate persistent database memory</h3>

<p>Similar to the ANSI C <code>malloc()</code> function, <code>ov_database_malloc()</code>
allocates a memory block of a given size and returns its pointer. While
<code>malloc()</code> allocates the memory on the system heap,
<code>ov_database_malloc()</code> allocates the memory in the persistent database.

   <p>If there's no memory block available in the database, the system tries to
increase the database file and map the new part of the file to memory. If
does not succeed, the function fails.

   <p><strong>Header file</strong>

   <p><code>#include "libov/ov_database.h"</code>

   <p><strong>Declaration</strong>

<pre class="format"><tt>OV_DLLFNCEXPORT OV_POINTER ov_database_malloc(
    OV_UINT size
);</tt>
</pre>
   <p><strong>Parameters</strong>

     <dl>
<dt><code>size</code><dd>The amount of persistent memory to allocate in the database (in bytes). 
</dl>

   <p><strong>Return value</strong>

   <p>The function returns a pointer to the allocated memory block if it succeeds
or <code>NULL</code> otherwise.

   <p><strong>Remarks</strong>

   <p>Even if <code>ov_database_getfree()</code> returns a value greater than
<code>size</code> the function may return <code>NULL</code> if no block of the
given size is available due to fragmentation.

   <p>If no database is mapped, the function always returns <code>NULL</code>.

<!--  -->
   </body></html>

